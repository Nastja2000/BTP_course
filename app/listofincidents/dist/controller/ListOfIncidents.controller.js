sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox"],(e,t,i,a,n,s,o)=>{"use strict";return e.extend("mi.listofincidents.controller.ListOfIncidents",{onInit(){var e=new n({filterEnabled:false,createDiaog:{title:"",description:"",quantity:0}});this.getView().setModel(e,"viewModel")},onSearchTitle:function(e){var a=[];var n=e.getSource().getValue();if(n&&n.length>0){var s=new t("Title",i.Contains,n);a.push(s)}var o=this.byId("idIncidentsTable");var r=o.getBinding("items");r.filter(a,"Application")},onSearchCustomer:function(e){var a=[];var n=e.getSource().getValue();if(n&&n.length>0){var s=new t("Customer_ID",i.Contains,n);a.push(s)}var o=this.byId("idIncidentsTable");var r=o.getBinding("items");r.filter(a,"Application")},onFilterTableByQuantityPress:function(){if(!this.oFilterItemsDialog){a.load({id:this.getView().getId(),name:"mi.listofincidents.view.FilterByQuantity",controller:this}).then(e=>{this.oFilterItemsDialog=e;this.getView().addDependent(e);e.open()})}else{this.oFilterItemsDialog.open()}},onCreateItemPress:function(){if(!this.oCreateItemFragment){this.oCreateItemFragment=a.load({name:"mi.listofincidents.view.CreateItem",controller:this});this.oCreateItemFragment.then(function(e){this.oCreateItemDialog=e;this.oCreateItemDialog.setModel(new n({}),"createItemDialog");this.getView().addDependent(this.oCreateItemDialog)}.bind(this))}this.oCreateItemFragment.then(function(e){var t=e.getModel("createItemDialog");var i={title:"",description:"",quantity:0};t.setData(i);e.open()}.bind(this))},closeCreateDialog:function(){this.getView().setBusy(false);this.oCreateItemDialog.close()},closeFilterDialog:function(){this.oFilterItemsDialog.close()},onFilterItemsByQuantity:function(){this.getView().byId("idFilterByQuantityDialog").getObjectBinding().invoke()},onCreateItemByQuantity:function(){var e=this.oCreateItemDialog.getModel("createItemDialog");var t=e.getData();var i=t.title,a=t.description,n=Number(t.quantity);var s=this.getView().getModel();var r=this.getView().getBindingContext();var l=s.bindContext("/ProcessorService.createItem(...)");l.setParameter("title",i);l.setParameter("description",a);l.setParameter("quantity",n);this.getView().setBusy(true);l.execute().then(function(){this.getView().setBusy(false);this.closeCreateDialog();this.getView().getModel().refresh()}.bind(this)).catch(function(e){this.getView().setBusy(false);this.closeCreateDialog();o.error(e.message)}.bind(this))}})});
//# sourceMappingURL=ListOfIncidents.controller.js.map